import { GoogleGenerativeAI, HarmCategory, HarmBlockThreshold } from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget, Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format.",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: 'Okay, here\'s a JSON-formatted travel plan for a couple visiting Las Vegas on a budget, including hotel options and a detailed 3-day itinerary.  I\'ll focus on free or low-cost attractions, affordable food options, and cost-effective transportation.\n\n```json\n{\n  "tripName": "Las Vegas Budget Getaway for Couples",\n  "duration": "3 Days",\n  "budget": "Cheap/Affordable",\n  "travelers": "Couple",\n  "dates": "Flexible (Adjust based on best deals)",\n  "notes": "This itinerary focuses on free attractions, affordable dining, and minimizing transportation costs.  Prices are estimates and can fluctuate.  Consider visiting during the off-season (summer or weekdays) for better deals.",\n  "hotels": [\n    {\n      "hotelName": "Circus Circus Hotel",\n      "hotelAddress": "2880 S Las Vegas Blvd, Las Vegas, NV 89109",\n      "price": "$30-$70 per night (depending on the season)",\n      "hotelImageUrl": "https://www.circuscircus.com/wp-content/uploads/2024/04/CCLV_Exteriors_Main_Hero_V1_1920x600.jpg",\n      "geoCoordinates": {\n        "latitude": 36.1282,\n        "longitude": -115.1655\n      },\n      "rating": 3.5,\n      "description": "A classic Vegas hotel with affordable rates, Circus Circus offers basic rooms and a variety of entertainment, including the Adventuredome indoor theme park (separate cost). It\'s located at the northern end of the Strip.",\n        "amenities": ["Pool", "Casino", "Free Parking", "Affordable Food Options"]\n    },\n    {\n      "hotelName": "Excalibur Hotel & Casino",\n      "hotelAddress": "3850 S Las Vegas Blvd, Las Vegas, NV 89109",\n      "price": "$40-$80 per night",\n      "hotelImageUrl": "https://www.excalibur.com/content/dam/eclv/page-headers/excalibur-exterior-overview-header.jpg",\n      "geoCoordinates": {\n        "latitude": 36.0985,\n        "longitude": -115.1743\n      },\n      "rating": 4.0,\n      "description": "A medieval-themed hotel on the south end of the Strip, Excalibur offers budget-friendly rooms and a fun atmosphere. Conveniently located near other major attractions.",\n        "amenities": ["Pool", "Casino", "Affordable Food Options", "Entertainment"]\n    },\n    {\n      "hotelName": "Linq Hotel & Casino",\n      "hotelAddress": "3535 S Las Vegas Blvd, Las Vegas, NV 89109",\n      "price": "$50-$100 per night",\n      "hotelImageUrl": "https://caesars.com/content/dam/caesars/las-vegas/the-linq/hotel/property-exterior/the-linq-hotel-las-vegas-property-exterior-night-aerial-view-16x9.jpg",\n      "geoCoordinates": {\n        "latitude": 36.1171,\n        "longitude": -115.1694\n      },\n      "rating": 4.2,\n      "description": "Located at the center of the strip. The Linq offers a modern feel, it is near the High Roller Observation Wheel. Rooms are typically more stylish, but still affordable. The LINQ Promenade offers many dining and entertainment options.",\n        "amenities": ["Pool", "Casino", "Shopping", "Dining", "High Roller"]\n    }\n  ],\n  "day1": {\n    "theme": "Southern Strip Exploration & Free Shows",\n    "bestTimeToVisit": "Morning to Evening",\n    "itinerary": [\n      {\n        "placeName": "Welcome to Las Vegas Sign",\n        "placeDetails": "Iconic photo opportunity. Get there early to avoid crowds.",\n        "placeImageUrl": "https://www.lasvegasnevada.gov/wp-content/uploads/2023/02/Welcome-Sign-Resized.jpg",\n        "geoCoordinates": {\n          "latitude": 36.0827,\n          "longitude": -115.1722\n        },\n        "ticketPricing": "Free",\n        "rating": 4.5,\n        "travelTimeFromHotel": "15-20 minutes by bus/rideshare from most hotels",\n        "timeToSpend": "30-60 minutes"\n      },\n      {\n        "placeName": "Bellagio Conservatory & Botanical Garden",\n        "placeDetails": "Stunning floral displays that change seasonally. Free to enter.",\n        "placeImageUrl": "https://www.bellagio.com/content/dam/mgm/bellagio/entertainment/conservatory-botanical-garden/bellagio-conservatory-garden-exhibit-new.jpg",\n        "geoCoordinates": {\n          "latitude": 36.1126,\n          "longitude": -115.1744\n        },\n        "ticketPricing": "Free",\n        "rating": 4.8,\n        "travelTimeFromPrevious": "15-20 minutes by bus/rideshare from Welcome Sign",\n        "timeToSpend": "1-2 hours"\n      },\n      {\n        "placeName": "Bellagio Fountains",\n        "placeDetails": "World-famous water show set to music. Free to watch. Shows every 30 minutes in the afternoon and every 15 minutes in the evening.",\n        "placeImageUrl": "https://i.ytimg.com/vi/wS447cl6U3M/maxresdefault.jpg",\n        "geoCoordinates": {\n          "latitude": 36.1129,\n          "longitude": -115.1741\n        },\n        "ticketPricing": "Free",\n        "rating": 4.9,\n        "travelTimeFromPrevious": "Right outside the Conservatory",\n        "timeToSpend": "30-60 minutes (watching multiple shows)"\n      },\n      {\n        "placeName": "Walk the Strip South",\n        "placeDetails": "Walk along the strip, see the sights outside the hotels (Luxor, Excalibur, New York New York), and enjoy the atmosphere.",\n        "placeImageUrl": "https://vegas.com/wp/wp-content/uploads/2023/09/strip-walking-optimized.jpg",\n        "geoCoordinates": {\n          "latitude": 36.0935,\n          "longitude": -115.1740\n        },\n        "ticketPricing": "Free",\n        "rating": 4.3,\n        "travelTimeFromPrevious": "Walking",\n        "timeToSpend": "2-3 hours"\n      },\n      {\n        "placeName": "Free Show: Fountains of Bellagio or Volcano at Mirage",\n        "placeDetails": "Enjoy a free show (Fountains of Bellagio). (Volcano at Mirage is currently closed, but check for reopening or alternatives)",\n        "placeImageUrl": "https://media.cntraveler.com/photos/5b65e28f71b49508d8ba742a/master/w_2048,c_limit/Fountains-of-Bellagio_Fountains-of-Bellagio-GettyImages-502620334.jpg",\n        "geoCoordinates": {\n          "latitude": 36.1129,\n          "longitude": -115.1741\n        },\n        "ticketPricing": "Free",\n        "rating": 4.8,\n        "travelTimeFromPrevious": "Walking Distance on the Strip",\n        "timeToSpend": "30-60 minutes"\n      }\n    ],\n     "budgetMeals": [\n        {"meal": "Pizza Slice", "location": "Secret Pizza (Cosmopolitan)", "price": "$5-8"},\n        {"meal": "Cheap Eats", "location": "Food court at Fashion Show Mall", "price": "$10-15"}\n      ]\n  },\n  "day2": {\n    "theme": "Downtown Las Vegas & Fremont Street Experience",\n    "bestTimeToVisit": "Afternoon to Late Evening",\n    "itinerary": [\n      {\n        "placeName": "Fremont Street Experience",\n        "placeDetails": "A pedestrian mall with a giant LED canopy, light shows, and street performers.  Free to enter (some performers may expect tips).",\n        "placeImageUrl": "https://vegasexperience.com/wp-content/uploads/2023/01/FremontStreet_Carousel.jpg",\n        "geoCoordinates": {\n          "latitude": 36.1703,\n          "longitude": -115.1423\n        },\n        "ticketPricing": "Free (except for specific attractions)",\n        "rating": 4.6,\n        "travelTimeFromHotel": "30-45 minutes by bus/rideshare from the Strip",\n        "timeToSpend": "3-4 hours (especially in the evening)"\n      },\n      {\n        "placeName": "Downtown Container Park",\n        "placeDetails": "Unique outdoor shopping and entertainment area made of shipping containers. Free to enter.",\n        "placeImageUrl": "https://downtowncontainerpark.com/wp-content/uploads/2022/06/DCP_WebsiteBanner_FINAL.jpg",\n        "geoCoordinates": {\n          "latitude": 36.1683,\n          "longitude": -115.1407\n        },\n        "ticketPricing": "Free",\n        "rating": 4.4,\n        "travelTimeFromPrevious": "5-10 minutes walk from Fremont Street",\n        "timeToSpend": "1-2 hours"\n      },\n      {\n        "placeName": "Street Performers and People Watching on Fremont Street",\n        "placeDetails": "Enjoy the unique characters and free entertainment.  Be prepared for interesting sights!",\n        "placeImageUrl": "https://vegasexperience.com/wp-content/uploads/2023/10/IMG_5387.jpg",\n        "geoCoordinates": {\n          "latitude": 36.1703,\n          "longitude": -115.1423\n        },\n        "ticketPricing": "Free (tips appreciated)",\n        "rating": 4.2,\n        "travelTimeFromPrevious": "Walking around Fremont Street",\n        "timeToSpend": "Ongoing throughout your visit"\n      },\n      {\n        "placeName": "Golden Nugget Casino (Free to Walk Through)",\n        "placeDetails": "Check out the famous hand-of-faith gold nugget, even if you don\'t gamble.",\n        "placeImageUrl": "https://www.goldennugget.com/las-vegas/wp-content/uploads/sites/6/2018/07/hand-of-faith.jpg",\n        "geoCoordinates": {\n          "latitude": 36.1703,\n          "longitude": -115.1441\n        },\n        "ticketPricing": "Free",\n        "rating": 4.0,\n        "travelTimeFromPrevious": "Walking Distance",\n        "timeToSpend": "30-60 Minutes"\n      }\n    ],\n      "budgetMeals": [\n        {"meal": "Cheap Eats", "location": "Heart Attack Grill (Fremont)", "price": "$10-20 (Novelty - consider sharing)"},\n        {"meal": "Pizza", "location": "Pizza Rock (Downtown)", "price": "$15-25"}\n      ]\n  },\n  "day3": {\n    "theme": "Central Strip, High Roller (Optional), and Departure",\n    "bestTimeToVisit": "Morning to Afternoon",\n    "itinerary": [\n      {\n        "placeName": "Walk the Strip Central",\n        "placeDetails": "Walk along the central part of the Strip (Caesar\'s, Venetian, Paris, Flamingo), window shop, and take in the sights.",\n        "placeImageUrl": "https://www.caesars.com/content/dam/caesars/destinations/las-vegas/things-to-do/strip/caesars-palace-las-vegas-strip-night-16x9.jpg",\n        "geoCoordinates": {\n          "latitude": 36.1162,\n          "longitude": -115.1705\n        },\n        "ticketPricing": "Free",\n        "rating": 4.5,\n        "travelTimeFromHotel": "Varies depending on hotel location",\n        "timeToSpend": "2-3 hours"\n      },\n      {\n        "placeName": "Venetian & Palazzo Canals (Free to Walk Around)",\n        "placeDetails": "Experience the canals and gondolas of Venice (gondola rides cost extra).",\n        "placeImageUrl": "https://res.cloudinary.com/simpleview/image/upload/v1697891093/clients/lasvegas/Venetian_Indoor_Canals_2_copy_3b7eb08d-4a1d-4926-b1c7-4a43f34173b4.jpg",\n        "geoCoordinates": {\n          "latitude": 36.1214,\n          "longitude": -115.1714\n        },\n        "ticketPricing": "Free (gondola rides extra)",\n        "rating": 4.7,\n        "travelTimeFromPrevious": "Walking distance",\n        "timeToSpend": "1-2 hours"\n      },\n      {\n        "placeName": "High Roller Observation Wheel (Optional - Budget Dependant)",\n        "placeDetails": "Enjoy panoramic views of Las Vegas.  Can be expensive, look for deals.",\n        "placeImageUrl": "https://caesars.com/content/dam/caesars/las-vegas/the-linq/things-to-do/attractions/high-roller/high-roller-observation-wheel-night-skyline-16x9.jpg",\n        "geoCoordinates": {\n          "latitude": 36.1171,\n          "longitude": -115.1694\n        },\n        "ticketPricing": "$25-35 per person (check for discounts)",\n        "rating": 4.4,\n        "travelTimeFromPrevious": "Walking distance (at the LINQ)",\n        "timeToSpend": "1-2 hours"\n      },\n        {\n        "placeName": "Eiffel Tower Viewing Deck (Paris Hotel)",\n        "placeDetails": "Get a taste of Paris with a viewing deck at Eiffel Tower Viewing Deck (Paris Hotel)",\n        "placeImageUrl": "https://media.timeout.com/images/104760645/750/422/image.jpg",\n        "geoCoordinates": {\n          "latitude": 36.1122,\n          "longitude": -115.1715\n        },\n        "ticketPricing": "$27",\n        "rating": 4.7,\n        "travelTimeFromPrevious": "Walking distance",\n        "timeToSpend": "1-2 hours"\n      }\n    ],\n     "budgetMeals": [\n        {"meal": "Cheap Eats", "location": "Ocean One Bar & Grille (Miracle Mile Shops)", "price": "$5.99 lunch specials"},\n        {"meal": "Buffet", "location": "Circus Circus Buffet (for a cheap buffet experience)", "price": "$20-30"}\n      ]\n  },\n  "transportation": {\n    "recommendation": "Las Vegas Monorail (if traveling frequently on the east side of the Strip), Deuce Bus (for travel along the strip, buy day pass), Walking (for exploring specific areas), Ride-sharing (Uber/Lyft) for longer distances, especially to/from the airport and Downtown.",\n    "budgetTips": "Utilize free trams between some hotels.  Avoid taxis if possible, as they can be expensive."\n  },\n  "generalBudgetTips": [\n    "Visit during the off-season for lower hotel rates.",\n    "Take advantage of free attractions and shows.",\n    "Look for happy hour deals and affordable dining options.",\n    "Buy snacks and drinks at a grocery store to avoid expensive hotel prices.",\n    "Walk as much as possible to save on transportation costs.",\n    "Consider a Las Vegas Power Pass or Go City pass if you plan to visit multiple paid attractions.",\n    "Check Groupon and other deal sites for discounts on shows and activities."\n  ]\n}\n```\n\n**Explanation and Important Considerations:**\n\n*   **JSON Format:**  The data is structured in a clear, machine-readable JSON format.\n*   **Hotel Options:**  I\'ve included three hotel options known for their relatively lower prices.  Prices are estimates and can vary significantly based on the time of year, day of the week, and booking platform.  *Always* check current pricing and availability.  I\'ve added Hotel Image URL, Hotel Description, Amenities.\n*   **Itinerary:** The itinerary focuses on free or low-cost attractions, keeping in mind that Las Vegas is primarily about entertainment and sightseeing.\n*   **Transportation:** I\'ve recommended cost-effective transportation options like the bus and walking.\n*   **Budget Meals:**  I\'ve included some budget-friendly meal suggestions.  Vegas has a wide range of dining options, so explore and find what suits you.\n*   **Flexibility:**  The "dates" field is flexible.  Check prices for different dates to find the best deals.  You can also adjust the itinerary based on your interests.\n*   **Tickets & Reservations:**  For any shows or attractions that require tickets, book in advance online to potentially save money.\n*   **Safety:**  Stay aware of your surroundings, especially at night. Keep an eye on your belongings.\n*   **Hydration:** Las Vegas is a desert. Drink plenty of water, especially when walking outside.\n*   **Tipping:** Tipping is customary in Las Vegas for service workers (waiters, bartenders, taxi drivers, etc.).\n*   **Check Opening Times/Availability:**  Always verify the opening times and availability of attractions, especially after the pandemic.\n*   **Budget:** This is a budget itinerary. You can adjust it to include higher-priced activities if desired.\n*   **Hotel Rating**: Hotel Rating given out of 5 stars.\n* **GeoCoordinates:** represent latitude and longitude of the mentioned locations.\n\n**How to Use This Plan:**\n\n1.  **Copy the JSON:** Copy the entire JSON content.\n2.  **Paste into a JSON Viewer/Editor:**  Paste the JSON into an online JSON viewer/editor (like `jsonlint.com` or `jsonformatter.org`) to make it easier to read and modify.\n3.  **Adjust Details:**  Modify the dates, hotel preferences, activities, and budget items to fit your specific needs and interests.\n4.  **Booking:**  Use the hotel addresses and place names to book accommodations and make reservations.\n5.  **Maps:** Use the GeoCoordinates to map the locations in Google Maps or a similar app. This will help you visualize the itinerary and plan your routes.\n6.  **Enjoy!**\n\nThis comprehensive plan should give you a solid starting point for planning an affordable and fun trip to Las Vegas! Remember to check prices and availability before you go, and be prepared to adjust your plans based on your preferences and budget.  Have a great time!\n',
        },
      ],
    },
  ],
});
